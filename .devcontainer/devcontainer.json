// .devcontainer/devcontainer.json
{
    "name": "SPIKE-Prime + Pybricks",
    "build": {
        "dockerfile": "Dockerfile"
    },
    // ------------- key lines -----------------
    "runArgs": [
        "--privileged", // gives us /dev/bus/usb/* & hci devices
        "--net=host", // BLE needs raw HCI / dbus on the host
        "--device=/dev/bus/usb", // USB DFU flashing
        "-v",
        "/var/run/dbus:/var/run/dbus" // share host DBus -> BlueZ
    ],
    "mounts": [
        "type=bind,source=/dev/bus/usb,target=/dev/bus/usb" // safer binder than -v
    ],
    // ----------------------------------------
    "postCreateCommand": "pip install --upgrade pybricksdev pybricks-stubs",
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance"
            ]
        }
    }
}